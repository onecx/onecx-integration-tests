name: Sonar Pull Request

on:
  workflow_run:
    workflows: ['On PR']
    types:
      - completed

permissions:
  contents: read
  pull-requests: write
  actions: read

jobs:
  pr:
    if: github.event.workflow_run.conclusion == 'success'
    uses: onecx/ci-angular/.github/workflows/angular-pr-sonar.yml@v1
    with:
      artifact: coverage-reports
    secrets: inherit
